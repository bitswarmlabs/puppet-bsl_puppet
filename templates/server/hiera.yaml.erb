# Managed by bsl_puppet
---
:backends:
  - yaml

:yaml:
  :datadir: "<%= scope.lookupvar('::puppet::server_envs_dir') %>/%{environment}/hieradata"

:hierarchy:
  - "<%= scope.lookupvar('::puppet::codedir') %>/infrastructure/${environment}/hieradata/defaults"
  - "<%= scope.lookupvar('::puppet::codedir') %>/infrastructure/${environment}/hieradata/nodes/%{::trusted.certname}"
  - "<%= scope.lookupvar('::puppet::codedir') %>/infrastructure/${environment}/hieradata/bootstrap/%{::app_project}"
  - "%{::aws_tag_profile}"
  - "%{::aws_tag_role}"
  - "%{::aws_tag_environment}"
  - "nodes/%{::trusted.certname}"
  - "<%= scope.lookupvar('::puppet::codedir') %>/infrastructure/${environment}/hieradata/common"
